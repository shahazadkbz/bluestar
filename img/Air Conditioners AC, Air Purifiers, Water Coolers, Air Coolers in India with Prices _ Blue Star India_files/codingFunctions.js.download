//////////////////Start Common Funtions///////////////////////////////////////

function fnTrim(strParam) {
    strParam = fnLeftTrim(strParam);
    strParam = fnRightTrim(strParam);
    return strParam;
}

function fnLeftTrim(strParam) {
    while (strParam.substring(0, 1) == ' ') {
        strParam = strParam.substring(1, strParam.length);
    }
    return strParam;
}

function fnRightTrim(strParam) {
    while (strParam.substring(strParam.length - 1, strParam.length) == ' ') {
        strParam = strParam.substring(0, strParam.length - 1);
    }
    return strParam;
}

function fnClearSelectBox(strSelect) {
    var objSelect = document.getElementById(strSelect);
    objSelect.selectedIndex = 0;
    var intLength = objSelect.length
    for (i = 0; i < intLength - 1; i++)
        objSelect.remove(1);
}

function getParameterByName(name) {
    var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}

//////////////////End Common Funtions///////////////////////////////////////

//////////////////Start Binding Countries///////////////////////////////////////
function fnBindCountries() {
    fnClearSelectBox("ddl_country");

    var url = "/Handlers/getAllCountries.ashx";

    $.ajax({
        dataType: "jsonp",
        url: url,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");

                var objSelect = document.getElementById("ddl_country");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}

//////////////////End Countries Binding///////////////////////////////////////

//////////////////Start State Bindings///////////////////////////////////////
function fnBindStates() {

    fnClearSelectBox("ddl_state");

    var url = "/Handlers/getStates.ashx";
    var strUrl = url;

    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");
                var objSelect = document.getElementById("ddl_state");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}



//////////////////End State Bindings///////////////////////////////////////////////////

///////////////////////////Start Get In Touch////////////////////////////

function fnGetInTouchsubmit() {

    var strUrl = "/Handlers/getInTouch.ashx";

    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        data: $('#frm_Getintouch').serialize(),
        async: false,
        type: "post",
        success: function (result) {

            if (result == "Success") {
                document.getElementById("frm_Getintouch").reset();
                //$("#frm_Getintouch").hide();
                //$("#GetInTouchThanks").show();

                fnclearGetInTouchform();
                $("#thankyoupage").trigger('click');
                setTimeout(function () {
                    window.location.reload();
                }, 3000);
            }
            else {

                fnclearGetInTouchform();

                var fullResult = result.split("@@");

                for (i = 0; i < fullResult.length - 1; i++) {

                    var arrResult = fullResult[i].split("*****");

                    if (arrResult[1] == "cpt") {

                        document.getElementById("span_cpt").innerHTML = "Please check I am not a robot.";
                    }
                    if (document.getElementById(arrResult[1]) != null) {
                        $("#span_" + arrResult[1]).css("display", "block");
                        $("#span_" + arrResult[1]).html(arrResult[0]);

                    }
                }
                //document.getElementById("span_cpt").innerHTML = "Please check I am not a robot.";
            }
        },
        error: function (result) {
            console.log(result);

            //alert("There has been an error on server. Concerned person are informed and would fix it ASAP. Please try after some time.");
        }
    });
}


///////////////////////////International Get In Touch////////////////////////////

function fnGetInTouchsubmitInt() {

    var strUrl = "/Handlers/getInTouchInt.ashx";

    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        data: $('#frm_GetintouchInt').serialize(),
        async: false,
        type: "post",
        success: function (result) {

            if (result == "Success") {
                document.getElementById("frm_GetintouchInt").reset();
                //$("#frm_Getintouch").hide();
                //$("#GetInTouchThanks").show();

                fnclearGetInTouchform();
                $("#thankyoupage").trigger('click');
                setTimeout(function () {
                    window.location.reload();
                }, 4000);
            }
            else {

                fnclearGetInTouchform();

                var fullResult = result.split("@@");
                console.log(fullResult);

                for (i = 0; i < fullResult.length - 1; i++) {

                    var arrResult = fullResult[i].split("*****");

                    if (arrResult[1] == "cpt") {

                        document.getElementById("span_cpt").innerHTML = "Please check I am not a robot.";
                    }
                    if (document.getElementById(arrResult[1]) != null) {
                        $("#span_" + arrResult[1]).css("display", "block");
                        $("#span_" + arrResult[1]).html(arrResult[0]);

                    }
                }
                //document.getElementById("span_cpt").innerHTML = "Please check I am not a robot.";
            }
        },
        error: function (result) {
            console.log(result);

            //alert("There has been an error on server. Concerned person are informed and would fix it ASAP. Please try after some time.");
        }
    });
}

///////////////////////////Start Get In Touch////////////////////////////

function fncontacttestsubmit() {

    var strUrl = "/Handlers/contactdetailsform.ashx";

    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        data: $('#frm_Getintouch').serialize(),
        async: false,
        type: "post",
        success: function (result) {

            if (result == "Success") {
                document.getElementById("frm_Getintouch").reset();
                //$("#frm_Getintouch").hide();
                //$("#GetInTouchThanks").show();

                fnclearGetInTouchform();
                $("#thankyoupage").trigger('click');
                setTimeout(function () {
                    window.location.reload();
                }, 3000);
            }
            else {

                fnclearGetInTouchform();

                var fullResult = result.split("@@");

                for (i = 0; i < fullResult.length - 1; i++) {

                    var arrResult = fullResult[i].split("*****");

                    if (arrResult[1] == "cpt") {

                        document.getElementById("span_cpt").innerHTML = "Please check I am not a robot.";
                    }
                    if (document.getElementById(arrResult[1]) != null) {
                        $("#span_" + arrResult[1]).css("display", "block");
                        $("#span_" + arrResult[1]).html(arrResult[0]);

                    }
                }
                //document.getElementById("span_cpt").innerHTML = "Please check I am not a robot.";
            }
        },
        error: function (result) {
            console.log(result);

            //alert("There has been an error on server. Concerned person are informed and would fix it ASAP. Please try after some time.");
        }
    });
}



function fneAndeGetInTouchsubmit() {

    var strUrl = "/Handlers/eAnde_getInTouch.ashx";

    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        data: $('#frm_Getintouch').serialize(),
        async: false,
        type: "post",
        success: function (result) {

            if (result == "Success") {
                document.getElementById("frm_Getintouch").reset();
                //$("#frm_Getintouch").hide();
                //$("#GetInTouchThanks").show();

                fnclearGetInTouchform();
                $("#thankyoupage").trigger('click');
                setTimeout(function () {
                    window.location.reload();
                }, 3000);
            }
            else {

                fnclearGetInTouchform();

                var fullResult = result.split("@@");

                for (i = 0; i < fullResult.length - 1; i++) {

                    var arrResult = fullResult[i].split("*****");

                    if (arrResult[1] == "cpt") {

                        document.getElementById("span_cpt").innerHTML = "Please check I am not a robot.";
                    }
                    if (document.getElementById(arrResult[1]) != null) {
                        $("#span_" + arrResult[1]).css("display", "block");
                        $("#span_" + arrResult[1]).html(arrResult[0]);

                    }
                }
                //document.getElementById("span_cpt").innerHTML = "Please check I am not a robot.";
            }
        },
        error: function (result) {
            console.log(result);

            //alert("There has been an error on server. Concerned person are informed and would fix it ASAP. Please try after some time.");
        }
    });
}


function fnclearGetInTouchform() {
    $("#span_txt_name_main").css("display", "none");
    $("#span_txt_email_main").css("display", "none");
    $("#span_txt_mobile_main").css("display", "none");
    $("#span_txt_company_name_main").css("display", "none");
    $("#span_txt_City_main").css("display", "none");
    $("#span_ddl_Products_main").css("display", "none");
    $("#span_ddl_state_main").css("display", "none");
    $("#span_ddl_Enquiry_main").css("display", "none");
    document.getElementById("span_cpt").innerHTML = "";
}

//////////////////////////End Get In Touch //////////////////////////////////////

/////////////////////////// Start Enquiry form /////////////////////////////////////////

function funcSubmitEnquiryeAndeForm() {
    var hndlrurl = "/Handlers/eAndeSubmit_Enquiry.ashx";
    $.ajax({ async: false, url: hndlrurl, dataType: "jsonp", data: $("#frmSubmitEnquiry").serialize(), success: function (result) {
        console.log(result);
        if (result == "success") {
            fnClearEnquiryeAndeForm();
            document.getElementById("frmSubmitEnquiry").reset();
            $("#thankyoupage").trigger('click');
            setTimeout(function () {
                window.location.reload();
            }, 3000);

        }
        else {

            fnClearEnquiryeAndeForm();

            var fullResult = result.split("@@");
            for (i = 0; i < fullResult.length; i++) {

                var arrResult = fullResult[i].split("*****");

                if (document.getElementById(arrResult[1]) != null) {

                    $("#" + arrResult[1]).css("display", "block");
                    $("#" + arrResult[1]).html(arrResult[0]);
                }
            }

        }
    },
        error: function ()
        { console.log("There is some error on server"); }
    });
}

function fnClearEnquiryeAndeForm() {
    $("#span_txt_name").hide();
    $("#span_txt_org_name").hide();
    $("#span_txt_Designation").hide();
    $("#span_txt_Address").hide();
    $("#span_ddl_country").hide();
    $("#span_ddl_state").hide();
    $("#span_txt_City").hide();
    $("#span_email_id").hide();
    $("#span_txt_Telephone").hide();
    $("#span_txt_Mobile").hide();
    $("#span_ddl_AreaOfInterest").hide();
    $("#span_txt_Comments").hide();
    $("#span_Captcha").hide();

}


function funcSubmitEnquiryFormNew() {
    var hndlrurl = "/Handlers/submitEnquiryNew.ashx";
    $.ajax({ async: false, url: hndlrurl, dataType: "jsonp", data: $("#frmSubmitEnquiry").serialize(), success: function (result) {
        console.log(result);
        if (result == "success") {
            fnClearEnquiryForm();
            document.getElementById("frmSubmitEnquiry").reset();
            $("#thankyoupage").trigger('click');
            setTimeout(function () {
                window.location.reload();
            }, 3000);

        }
        else {

            fnClearEnquiryForm();

            var fullResult = result.split("@@");
            for (i = 0; i < fullResult.length; i++) {

                var arrResult = fullResult[i].split("*****");

                if (document.getElementById(arrResult[1]) != null) {

                    $("#" + arrResult[1]).css("display", "block");
                    $("#" + arrResult[1]).html(arrResult[0]);
                }
            }

        }
    },
        error: function ()
        { console.log("There is some error on server"); }
    });
}


function funcSubmitEnquiryForm() {
    var hndlrurl = "/Handlers/submitEnquiry.ashx";
    $.ajax({ async: false, url: hndlrurl, dataType: "jsonp", data: $("#frmSubmitEnquiry").serialize(), success: function (result) {
        if (result == "success") {
            fnClearEnquiryForm();
            document.getElementById("frmSubmitEnquiry").reset();
            $("#thankyoupage").trigger('click');
        }
        else {

            fnClearEnquiryForm();

            var fullResult = result.split("@@");
            for (i = 0; i < fullResult.length; i++) {

                var arrResult = fullResult[i].split("*****");

                if (document.getElementById(arrResult[1]) != null) {

                    $("#" + arrResult[1]).css("display", "block");
                    $("#" + arrResult[1]).html(arrResult[0]);
                }
            }

        }
    },
        error: function ()
        { alert("There is some error on server"); }
    });
}

function fnClearEnquiryForm() {
    $("#span_txt_name").hide();
    $("#span_txt_org_name").hide();
    $("#span_txt_Designation").hide();
    $("#span_ddl_country").hide();
    $("#span_txt_Address").hide();
    $("#span_ddl_state").hide();
    $("#span_txt_Pincode").hide();
    $("#span_txt_City").hide();
    $("#span_email_id").hide();
    $("#span_txt_Telephone").hide();
    $("#span_txt_Mobile").hide();
    $("#span_txt_Fax").hide();
    $("#span_ddl_LineOfBussiness").hide();
    $("#span_ddl_Products").hide();
    $("#span_txt_enq").hide();
    $("#span_Captcha").hide();

}

function fnSetStates() {
    if ($("#ddl_country").val() == "India") {
        $("#ddl_state").prop('disabled', false);
        $("#ddl_state").removeClass("disabled-select");
        fnBindStates();
    } else {
        fnClearSelectBox("ddl_state");
        $("#ddl_state").addClass("disabled-select");
        $("#ddl_state").prop('disabled', true);
    }
}
//////////////////End Enquiry///////////////////////////////////////

/////////////////Airmanagement Form Start////////////////////////////

function funcAirManagementForm() {
    var hndlrurl = "/Handlers/airmanagementservices.ashx";
    $.ajax({ async: false, url: hndlrurl, dataType: "jsonp", data: $("#frmAirManagement").serialize(), success: function (result) {
        console.log(result);
        console.log('x');
        if (result == "success") {
            fnClearAirManagementForm();
            document.getElementById("frmAirManagement").reset();
            $("#thankyoupage").trigger('click');
            setTimeout(function () {
                window.location.reload();
            }, 3000);

        }
        else {

            fnClearAirManagementForm();

            var fullResult = result.split("@@");
            for (i = 0; i < fullResult.length; i++) {

                var arrResult = fullResult[i].split("*****");

                if (document.getElementById(arrResult[1]) != null) {

                    $("#" + arrResult[1]).css("display", "block");
                    $("#" + arrResult[1]).html(arrResult[0]);
                }
            }

        }
    },
        error: function ()
        { console.log("There is some error on server"); }
    });
}

function fnClearAirManagementForm() {
    $("#span_txt_name").hide();
    $("#span_txt_org_name").hide();

    $("#span_txt_City").hide();
    $("#span_email_id").hide();

    $("#span_txt_Mobile").hide();
    $("#span_txt_enqfor").hide();

    $("#span_Captcha").hide();

}

//////////////////End Air Management Form//////////////////////////


///////////////// ServicesNEW Form Start////////////////////////////

function servicesnewForm() {
    var hndlrurl = "/Handlers/servicesnew.ashx";
    $.ajax({ async: false, url: hndlrurl, dataType: "jsonp", data: $("#servicesManagement").serialize(), success: function (result) {
        console.log(result);
        console.log('x');
        if (result == "success") {
            fnClearAirManagementForm();
            document.getElementById("servicesManagement").reset();
            $("#thankyoupage").trigger('click');
            setTimeout(function () {
                window.location.reload();
            }, 3000);

        }
        else {

            fnClearAirManagementForm();

            var fullResult = result.split("@@");
            for (i = 0; i < fullResult.length; i++) {

                var arrResult = fullResult[i].split("*****");

                if (document.getElementById(arrResult[1]) != null) {

                    $("#" + arrResult[1]).css("display", "block");
                    $("#" + arrResult[1]).html(arrResult[0]);
                }
            }

        }
    },
        error: function ()
        { console.log("There is some error on server"); }
    });
}

function fnClearAirManagementForm() {
    $("#span_txt_name").hide();
    $("#span_txt_org_name").hide();

    $("#span_txt_City").hide();
    $("#span_email_id").hide();

    $("#span_txt_Mobile").hide();
    $("#span_txt_enqfor").hide();

    $("#span_Captcha").hide();

}

//////////////////End ServicesNEW Form//////////////////////////


///////////////// ServicesNEW Form Start////////////////////////////

function servicesnewForm2() {
    var hndlrurl = "/Handlers/servicesnew2.ashx";
    $.ajax({ async: false, url: hndlrurl, dataType: "jsonp", data: $("#servicesManagement").serialize(), success: function (result) {
        console.log(result);
        console.log('x');
        if (result == "success") {
            fnClearAirManagementForm();
            document.getElementById("servicesManagement").reset();
            $("#thankyoupage").trigger('click');
            setTimeout(function () {
                window.location.reload();
            }, 3000);

        }
        else {

            fnClearAirManagementForm();

            var fullResult = result.split("@@");
            for (i = 0; i < fullResult.length; i++) {

                var arrResult = fullResult[i].split("*****");

                if (document.getElementById(arrResult[1]) != null) {

                    $("#" + arrResult[1]).css("display", "block");
                    $("#" + arrResult[1]).html(arrResult[0]);
                }
            }

        }
    },
        error: function ()
        { console.log("There is some error on server"); }
    });
}

function servicesnewForm3() {
    var hndlrurl = "/Handlers/servicesnew3.ashx";
    $.ajax({ async: false, url: hndlrurl, dataType: "jsonp", data: $("#servicesManagement").serialize(), success: function (result) {
        console.log(result);
        console.log('x');
        if (result == "success") {
            fnClearAirManagementForm();
            document.getElementById("servicesManagement").reset();
            $("#thankyoupage").trigger('click');
            setTimeout(function () {
                window.location.reload();
            }, 3000);

        }
        else {

            fnClearAirManagementForm();

            var fullResult = result.split("@@");
            for (i = 0; i < fullResult.length; i++) {

                var arrResult = fullResult[i].split("*****");

                if (document.getElementById(arrResult[1]) != null) {

                    $("#" + arrResult[1]).css("display", "block");
                    $("#" + arrResult[1]).html(arrResult[0]);
                }
            }

        }
    },
        error: function ()
        { console.log("There is some error on server"); }
    });
}

function vrfvsform() {
    var hndlrurl = "/Handlers/vrfvsform.ashx";
    $.ajax({ async: false, url: hndlrurl, dataType: "jsonp", data: $("#servicesManagement").serialize(), success: function (result) {
        console.log(result);
        console.log('x');
        if (result == "success") {
            fnClearAirManagementForm();
            document.getElementById("servicesManagement").reset();
            $("#thankyoupage").trigger('click');
            setTimeout(function () {
                window.location.reload();
            }, 3000);

        }
        else {

            fnClearAirManagementForm();

            var fullResult = result.split("@@");
            for (i = 0; i < fullResult.length; i++) {

                var arrResult = fullResult[i].split("*****");

                if (document.getElementById(arrResult[1]) != null) {

                    $("#" + arrResult[1]).css("display", "block");
                    $("#" + arrResult[1]).html(arrResult[0]);
                }
            }

        }
    },
        error: function ()
        { console.log("There is some error on server"); }
    });
}


function fnClearAirManagementForm() {
    $("#span_txt_name").hide();
    $("#span_txt_org_name").hide();

    $("#span_txt_City").hide();
    $("#span_email_id").hide();

    $("#span_txt_Mobile").hide();
    $("#span_txt_enqfor").hide();

    $("#span_Captcha").hide();

}

//////////////////End ServicesNEW Form//////////////////////////

///////////////// Collaborative Start////////////////////////////

function collaborative() {
    var hndlrurl = "/Handlers/collaborative.ashx";
    $.ajax({ async: false, url: hndlrurl, dataType: "jsonp", data: $("#collaborativeRobots").serialize(), success: function (result) {
        console.log(result);
        console.log('x');
        if (result == "success") {
            fnClearAirManagementForm();
            document.getElementById("collaborativeRobots").reset();
            $("#thankyoupage").trigger('click');
            setTimeout(function () {
                window.location.reload();
            }, 3000);

        }
        else {

            fnClearAirManagementForm();

            var fullResult = result.split("@@");
            for (i = 0; i < fullResult.length; i++) {

                var arrResult = fullResult[i].split("*****");

                if (document.getElementById(arrResult[1]) != null) {

                    $("#" + arrResult[1]).css("display", "block");
                    $("#" + arrResult[1]).html(arrResult[0]);
                }
            }

        }
    },
        error: function ()
        { console.log("There is some error on server"); }
    });
}

function fnClearAirManagementForm() {
    $("#span_txt_name").hide();
    $("#span_txt_org_name").hide();

    $("#span_txt_City").hide();
    $("#span_email_id").hide();

    $("#span_txt_Mobile").hide();
    $("#span_txt_enqfor").hide();

    $("#span_Captcha").hide();

}

//////////////////End Collaborative Form//////////////////////////

//////////////////Start Dealers///////////////////////////////////////

function fnBindDealerCategories() {
    fnClearSelectBox("ddl_Category");

    var url = "/Handlers/getDealerCategories.ashx";

    $.ajax({
        dataType: "jsonp",
        url: url,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");

                var objSelect = document.getElementById("ddl_Category");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}

function fnLoadDealerStates() {

    fnClearSelectBox("ddl_state");

    var category = encodeURIComponent(fnTrim(document.getElementById("ddl_Category").value));

    var queryString = "?category=" + category;
    var url = '/Handlers/getDealerStates.ashx';
    var strUrl = url + queryString;

    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");
                var objSelect = document.getElementById("ddl_state");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}

function fnLoadDealersCity() {

    fnClearSelectBox("ddl_city");

    var category = encodeURIComponent(fnTrim(document.getElementById("ddl_Category").value));
    var state = encodeURIComponent(fnTrim(document.getElementById("ddl_state").value));

    var queryString = "?category=" + category + "&state=" + state;
    var url = '/Handlers/getDealerCities.ashx';
    var strUrl = url + queryString;

    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");
                var objSelect = document.getElementById("ddl_city");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}

function fnBindDealersData() {

    var strUrl = "/Handlers/getAllDealerData.ashx";

    var postData = { "state": "" }


    $.ajax({ url: strUrl, data: postData, type: "GET", async: false, success: function (result) {

        var response = result;
        $("#dvJSONDealerData").html("<script>" + result + "<\/script>");
    },
        error: function () { }

    });
}

var infowindow;
var map;
var zoomlevel;

function initialize() {
    var arrFilterDealerInfo = arrDealerInfo;
    var sqlDealerInfo = "select * from arrDealerInfo ";


    if ($("#ddl_Category").val() != "" && $("#ddl_state").val() != "" && $("#ddl_city").val() != "") {
        sqlDealerInfo = "select * from arrDealerInfo where (Category=='" + $("#ddl_Category").val() + "' && State=='" + $("#ddl_state").val() + "' && City=='" + $("#ddl_city").val() + "')";

    }
    else if ($("#ddl_Category").val() != "" && $("#ddl_state").val() != "" && $("#ddl_city").val() == "") {
        sqlDealerInfo = "select * from arrDealerInfo where (Category=='" + $("#ddl_Category").val() + "' && State=='" + $("#ddl_state").val() + "' )";

    }
    else if ($("#ddl_Category").val() != "" && $("#ddl_state").val() == "" && $("#ddl_city").val() == "") {
        sqlDealerInfo = "select * from arrDealerInfo where (Category=='" + $("#ddl_Category").val() + "' )";

    }

    arrFilterDealerInfo = jsonsql.query(sqlDealerInfo, arrDealerInfo);
    var markers = arrFilterDealerInfo;
    var strData = "";
    if (arrFilterDealerInfo.length > 0) {
        for (var index = 0; index < arrFilterDealerInfo.length; index++) {
            strData += "<li>";
            strData += "<p><strong>" + arrFilterDealerInfo[index].DealerName + "</strong></p>";
            strData += "<p>" + arrFilterDealerInfo[index].Name + "</p>";
            strData += "<p>" + arrFilterDealerInfo[index].Address + "</p>";
            if (arrFilterDealerInfo[index].Phone != "" && arrFilterDealerInfo[index].Phone != null) {
                strData += "<p>Phone: " + arrFilterDealerInfo[index].Phone + "</p>";
            }
            if (arrFilterDealerInfo[index].Fax != "" && arrFilterDealerInfo[index].Fax != null) {
                strData += "<p>Fax: " + arrFilterDealerInfo[index].Fax + "</p>";
            }
            if (arrFilterDealerInfo[index].Mobile != "" && arrFilterDealerInfo[index].Mobile != null) {
                strData += "<p>Mobile: " + arrFilterDealerInfo[index].Mobile + "</p>";
            }
            if (arrFilterDealerInfo[index].Email != "" && arrFilterDealerInfo[index].Email != null) {
                strData += "<p>Email: " + arrFilterDealerInfo[index].Email + "</p>";
            }
            strData += "</li>";
            document.getElementById("channel").innerHTML = "Channel Partners";
        }

    }
    else {

        //strData = "No data found!";
        //$("channel").html("");
        document.getElementById("channel").innerHTML = "";
    }
    $("#displayDealerData").html(strData);

    codeAddress();
    zoomlevel = 7;
    var zoomlat = $("#hdn_lat").val();
    var zoomlng = $("#hdn_lng").val();

    if ($("#ddl_state").val() != "") {
        try {
            zoomlat = markers[0].Latitude;
            zoomlng = markers[0].Longitude;
        } catch (e) { }
        zoomlevel = 14;
    }

    var myLatlng = new google.maps.LatLng(zoomlat, zoomlng);

    var myOptions = {
        zoom: zoomlevel,
        center: myLatlng,
        zoomControl: false,
        streetViewControl: false,
        mapTypeControl: false,
        zoomControlOptions: {
            style: google.maps.ZoomControlStyle.SMALL
        },

        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    google.maps.event.addListenerOnce(map, 'idle', function () {

        google.maps.event.trigger(map, 'resize');
        map.setCenter(myLatlng);
    });

    for (var i = 0; i < markers.length; i++) {
        var data = markers[i];
        var latlng = new google.maps.LatLng(data.Latitude, data.Longitude);
        var MarkerBody = "<div>";
        MarkerBody += "<strong>" + data.DealerName + "</strong><br>";
        MarkerBody += "<strong>" + data.Name + "</strong><br>";
        MarkerBody += "<strong>Address: </strong>" + data.Address + "<br>";
        if (data.Phone != "") {
            MarkerBody += "<strong>Phone: </strong> " + data.Phone + "<br>";
        }
        if (data.Mobile != "") {
            MarkerBody += "<strong>Mobile: </strong>" + data.Mobile + "";
        }
        if (data.Email != "") {
            MarkerBody += "<strong>Email: </strong> " + data.Email + "<br>";
        }
        MarkerBody += "</div>";
        var marker = createMarker(MarkerBody, latlng);
    }

    function createMarker(name, latlng) {
        var markerOptions = {
            position: latlng,
            map: map
        }
        var marker = new google.maps.Marker(markerOptions);
        google.maps.event.addListener(marker, "click", function () {
            if (infowindow) infowindow.close();
            infowindow = new google.maps.InfoWindow({ content: name });
            infowindow.open(map, marker);
        });
        return marker;
    }


}

function codeAddress() {

    var stateAddress;
    if ($("#ddl_state").val() != "") {
        stateAddress = $("#ddl_state").val() + ", India";
    }
    else {
        stateAddress = "India";
    }

    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({ 'address': stateAddress }, function (results, status) {

        if (status == google.maps.GeocoderStatus.OK) {
            document.getElementById("hdn_lat").value = results[0].geometry.location.lat();
            document.getElementById("hdn_lng").value = results[0].geometry.location.lng();
        }
    });

}

function nearByDealers() {
    if ($("#ddl_Category").val() == "") {
        alert("Please select category");
        document.getElementById("ddl_Category").focus();
        return false;
    }
    else {
        initialize();
    }
}
//////////////////End Dealers///////////////////////////////////////



/////////////////////////// Start For Comapany Location Functionality //////////////////////////////////////////


function fnBindLocationType() {
    fnClearSelectBox("ddl_LocationType");

    var url = "/Handlers/getLocationType.ashx";

    $.ajax({
        dataType: "jsonp",
        url: url,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");

                var objSelect = document.getElementById("ddl_LocationType");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i].split("@@@")[1];
                    option.value = arrResult[i].split("@@@")[0];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}


function fnBindEELocationType() {
    fnClearSelectBox("ddl_LocationType");

    var url = "/Handlers/getEELocationType.ashx";

    $.ajax({
        dataType: "jsonp",
        url: url,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");

                var objSelect = document.getElementById("ddl_LocationType");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i].split("@@@")[1];
                    option.value = arrResult[i].split("@@@")[0];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}


function initializeGoogleMap() {
    /////////Start google map//////////

    var arrFilterDealerInfo = arrCompanyLocationInfo;
    var sqlDealerInfo = "select * from arrCompanyLocationInfo ";

    if ($("#ddl_LocationType").val() != "") {
        sqlDealerInfo = "select * from arrCompanyLocationInfo where (TypeId=='" + $("#ddl_LocationType").val() + "')";
    }

    var markers = jsonsql.query(sqlDealerInfo, arrCompanyLocationInfo);
    zoomlevel = 7;
    var zoomlat = $("#hdn_lat").val();
    var zoomlng = $("#hdn_lng").val();


    try {
        zoomlat = markers[0].Latitude;
        zoomlng = markers[0].Longitude;
    } catch (e) { }
    zoomlevel = 8;


    var myLatlng = new google.maps.LatLng(zoomlat, zoomlng);

    var myOptions = {
        zoom: zoomlevel,
        center: myLatlng,
        zoomControl: false,
        streetViewControl: false,
        mapTypeControl: false,
        zoomControlOptions: {
            style: google.maps.ZoomControlStyle.SMALL
        },

        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    google.maps.event.addListenerOnce(map, 'idle', function () {

        google.maps.event.trigger(map, 'resize');
        map.setCenter(myLatlng);
    });

    for (var i = 0; i < markers.length; i++) {
        var data = markers[i];
        var latlng = new google.maps.LatLng(data.Latitude, data.Longitude);
        var MarkerBody = "<div>";
        //MarkerBody += "<strong>" + data.DealerName + "</strong><br>";
        //MarkerBody += "<strong>" + data.Name + "</strong><br>";
        MarkerBody += "<strong>Address: </strong>" + data.Address + "<br>";
        if (data.Phone != "") {
            MarkerBody += "<strong>Phone: </strong> " + data.Phone + "<br>";
        }


        MarkerBody += "</div>";
        var marker = createMarker(MarkerBody, latlng);
    }


    function createMarker(name, latlng) {
        var markerOptions = {
            position: latlng,
            map: map
        }
        var marker = new google.maps.Marker(markerOptions);
        google.maps.event.addListener(marker, "click", function () {
            if (infowindow) infowindow.close();
            infowindow = new google.maps.InfoWindow({ content: name });
            infowindow.open(map, marker);
        });
        return marker;
    }

    //End Google Map//////////
}

function fnGetMilestones() {

    var strUrl = "/Handlers/getMilestones.ashx";
    var postData = "";

    $.ajax({
        url: strUrl, data: postData, type: "GET", async: false, success: function (result) {
            {
                $("#tbl_Milestones").html(result);
            }

        },
        error: function () {
            alert("There has been an error on server. Please try after some time.");
        }
    });



}


function fnGetJobsApplications() {

    var strUrl = "/Handlers/getJobsApplications.ashx";
    var postData = "";

    $.ajax({
        url: strUrl, data: postData, type: "GET", async: false, success: function (result) {
            {
                $("#myTable").html(result);
            }

        },
        error: function () {
            alert("There has been an error on server. Please try after some time.");
        }
    });

}

function initializeLocationMAP() {
    var strUrl = "/Handlers/getAllCompanyLocation.ashx";
    var strCategory = "";
    var postData = { "state": "" }


    $.ajax({ url: strUrl, data: postData, type: "GET", async: false, success: function (result) {

        var response = result;
        $("#dvJSONDealerData").html("<script>" + result + "<\/script>");
    },
        error: function () { }

    });
    var arrFilterarrLocationTypeInfo = "select * from arrLocationTypeInfo";
    if ($("#ddl_LocationType").val() != "") {
        arrFilterarrLocationTypeInfo = "select * from arrLocationTypeInfo where (TypeId=='" + $("#ddl_LocationType").val() + "')";
    }
    arrFilterarrLocationTypeInfo = jsonsql.query(arrFilterarrLocationTypeInfo, arrLocationTypeInfo);
    if (arrFilterarrLocationTypeInfo.length > 0) {
        for (var index = 0; index < arrFilterarrLocationTypeInfo.length; index++) {
            strCategory += "<div class=\"locations-dealersSearch-address\">";
            strCategory += "<div><span><img src=\"" + arrFilterarrLocationTypeInfo[index].LocationImg + "\"/></span>" + arrFilterarrLocationTypeInfo[index].LocationType + "</div>";
            //Start binding location details
            var strData = "";

            var sqlDealerInfo = "select * from arrCompanyLocationInfo ";
            if (arrFilterarrLocationTypeInfo[index].TypeId != "" && arrFilterarrLocationTypeInfo[index].TypeId != null) {
                sqlDealerInfo = "select * from arrCompanyLocationInfo where (TypeId=='" + arrFilterarrLocationTypeInfo[index].TypeId + "')";
            }
            var arrFilterDealerInfo = jsonsql.query(sqlDealerInfo, arrCompanyLocationInfo);
            if (arrFilterDealerInfo.length > 0) {

                strData += "<ul>";
                for (var i = 0; i < arrFilterDealerInfo.length; i++) {
                    strData += "<li>";
                    strData += "<p><b>" + arrFilterDealerInfo[i].City + "</b></p>";
                    if (arrFilterDealerInfo[i].GMapLink != "" && arrFilterDealerInfo[i].GMapLink != null) {
                        strData += "<p><a href=\"" + arrFilterDealerInfo[i].GMapLink.trim() + "\" target=\"_blank\">" + arrFilterDealerInfo[i].Address + "<a></p>";
                    }
                    else {
                        strData += "<p>" + arrFilterDealerInfo[i].Address + "</p>";
                    }

                    //strData += "<p><a href=\"https://www.google.co.in/maps/place/" + arrFilterDealerInfo[i].Latitude.trim() + "," + arrFilterDealerInfo[i].Longitude.trim() + "\" target=\"_blank\">" + arrFilterDealerInfo[i].Address + "<a></p>";
                    if (arrFilterDealerInfo[i].Phone != "" && arrFilterDealerInfo[i].Phone != null) {
                        strData += "<p>Phone: " + arrFilterDealerInfo[i].Phone + "</p>";
                    }
                    if (arrFilterDealerInfo[i].Fax != "" && arrFilterDealerInfo[i].Fax != null) {
                        strData += "<p>Fax: " + arrFilterDealerInfo[i].Fax + "</p>";
                    }

                    strData += "</li>";
                }
                strData += "</ul>";
            }
            //End Location Details
            strCategory += strData;
            strCategory += "</div>";
        }
    }
    $("#displayDealerData").html(strCategory);
    initializeGoogleMap();
}



function initializeEELocationMAP() {
    var strUrl = "/Handlers/getEandEAllCompanyLocation.ashx";
    var strCategory = "";
    var postData = { "state": "" }


    $.ajax({ url: strUrl, data: postData, type: "GET", async: false, success: function (result) {

        var response = result;
        $("#dvJSONDealerData").html("<script>" + result + "<\/script>");
    },
        error: function () { }

    });
    var arrFilterarrLocationTypeInfo = "select * from arrLocationTypeInfo";
    if ($("#ddl_LocationType").val() != "") {
        arrFilterarrLocationTypeInfo = "select * from arrLocationTypeInfo where (TypeId=='" + $("#ddl_LocationType").val() + "')";
    }
    arrFilterarrLocationTypeInfo = jsonsql.query(arrFilterarrLocationTypeInfo, arrLocationTypeInfo);
    if (arrFilterarrLocationTypeInfo.length > 0) {
        for (var index = 0; index < arrFilterarrLocationTypeInfo.length; index++) {
            strCategory += "<div class=\"locations-dealersSearch-address\">";
            strCategory += "<div><span><img src=\"" + arrFilterarrLocationTypeInfo[index].LocationImg + "\"/></span>" + arrFilterarrLocationTypeInfo[index].LocationType + "</div>";
            //Start binding location details
            var strData = "";

            var sqlDealerInfo = "select * from arrCompanyLocationInfo ";
            if (arrFilterarrLocationTypeInfo[index].TypeId != "" && arrFilterarrLocationTypeInfo[index].TypeId != null) {
                sqlDealerInfo = "select * from arrCompanyLocationInfo where (TypeId=='" + arrFilterarrLocationTypeInfo[index].TypeId + "')";
            }
            var arrFilterDealerInfo = jsonsql.query(sqlDealerInfo, arrCompanyLocationInfo);
            if (arrFilterDealerInfo.length > 0) {

                strData += "<ul>";
                for (var i = 0; i < arrFilterDealerInfo.length; i++) {
                    strData += "<li>";
                    strData += "<p><b>" + arrFilterDealerInfo[i].City + "</b></p>";
                    if (arrFilterDealerInfo[i].GMapLink != "" && arrFilterDealerInfo[i].GMapLink != null) {
                        strData += "<p><a href=\"" + arrFilterDealerInfo[i].GMapLink.trim() + "\" target=\"_blank\">" + arrFilterDealerInfo[i].Address + "<a></p>";
                    }
                    else {
                        strData += "<p>" + arrFilterDealerInfo[i].Address + "</p>";
                    }

                    //strData += "<p><a href=\"https://www.google.co.in/maps/place/" + arrFilterDealerInfo[i].Latitude.trim() + "," + arrFilterDealerInfo[i].Longitude.trim() + "\" target=\"_blank\">" + arrFilterDealerInfo[i].Address + "<a></p>";
                    if (arrFilterDealerInfo[i].Phone != "" && arrFilterDealerInfo[i].Phone != null) {
                        strData += "<p>Phone: " + arrFilterDealerInfo[i].Phone + "</p>";
                    }
                    if (arrFilterDealerInfo[i].Fax != "" && arrFilterDealerInfo[i].Fax != null) {
                        strData += "<p>Fax: " + arrFilterDealerInfo[i].Fax + "</p>";
                    }

                    strData += "</li>";
                }
                strData += "</ul>";
            }
            //End Location Details
            strCategory += strData;
            strCategory += "</div>";
        }
    }
    $("#displayDealerData").html(strCategory);
    //initializeGoogleMap();
}



////////////////////// End Comapany Location Functionality ///////////////////////////////////////////////////



/////////////////////////// Start Warranty Registration form /////////////////////////////////////////

function funcSubmitWarrantyRegistrationForm() {

    var hndlrurl = "/Handlers/submitWarranty.ashx";
    //alert(hndlrurl);
    $.ajax({ async: false, url: hndlrurl, dataType: "jsonp", data: $("#frmSubmitWarrantyRegistration").serialize(), success: function (result) {
        if (result == "success") {
            fnClearWarrantyRegistrationForm();
            document.getElementById("frmSubmitWarrantyRegistration").reset();
            $("#thankyoupage").trigger('click');
        }
        else {

            fnClearWarrantyRegistrationForm();

            var fullResult = result.split("@@");
            for (i = 0; i < fullResult.length; i++) {

                var arrResult = fullResult[i].split("*****");

                if (document.getElementById(arrResult[1]) != null) {

                    $("#" + arrResult[1]).css("display", "block");
                    $("#" + arrResult[1]).html(arrResult[0]);
                }
            }

        }
    },
        error: function ()
        { alert("There is some error on server"); }
    });
}

function fnClearWarrantyRegistrationForm() {
    $("#span_txt_CustomerName").hide();
    $("#span_txt_Bill_BuildingName").hide();
    $("#span_txt_Bill_FlatNo").hide();
    $("#span_txt_Bill_RoadName").hide();
    $("#span_txt_Bill_Locality").hide();
    $("#span_txt_Bill_Landmark").hide();
    $("#span_txt_Bill_Pincode").hide();
    $("#span_ddl_Bill_State").hide();
    $("#span_ddl_Bill_City").hide();
    $("#span_txt_Bill_TelephoneNo").hide();
    $("#span_txt_Bill_MobileNo").hide();
    $("#span_txt_Bill_Email").hide();

    $("#span_txt_Ins_BuildingName").hide();
    $("#span_txt_Ins_FlatNo").hide();
    $("#span_txt_Ins_RoadName").hide();
    $("#span_txt_Ins_Locality").hide();
    $("#span_txt_Ins_Landmark").hide();
    $("#span_txt_Ins_Pincode").hide();
    $("#span_ddl_Ins_State").hide();
    $("#span_ddl_Ins_City").hide();
    $("#span_txt_Ins_TelephoneNo").hide();
    $("#span_txt_Ins_MobileNo").hide();
    $("#span_txt_Ins_Email").hide();
    $("#span_ddl_ProductType").hide();
    $("#span_ddl_ModelNo").hide();
    $("#span_txt_MachineSerialNo").hide();
    $("#span_txt_IndUnitSerialNo").hide();
    $("#span_txt_DealerName").hide();
    $("#span_txt_InstallationDate").hide();
    $("#span_ddl_Installed").hide();
    $("#span_txt_ContactPerson").hide();
    $("#span_txt_ContactName").hide();
    $("#span_Captcha").hide();



}
//////////////////End Warranty Registration///////////////////////////////////////


function fnBindBillingStates() {

    //alert(1);
    fnClearSelectBox("ddl_Bill_State");

    var url = "/Handlers/getStates.ashx";
    var strUrl = url;

    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");
                var objSelect = document.getElementById("ddl_Bill_State");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}

function fnBindBillingCity() {


    fnClearSelectBox("ddl_Bill_City");

    var state = encodeURIComponent(fnTrim(document.getElementById("ddl_Bill_State").value));

    var queryString = "?state=" + state;
    var url = '/Handlers/getCity.ashx';
    var strUrl = url + queryString;


    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");
                var objSelect = document.getElementById("ddl_Bill_City");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}


function fnBindddl_InsStates() {

    fnClearSelectBox("ddl_Ins_State");

    var url = "/Handlers/getStates.ashx";
    var strUrl = url;

    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");
                var objSelect = document.getElementById("ddl_Ins_State");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}

function fnBind_Ins_City() {

    fnClearSelectBox("ddl_Ins_City");

    var state = encodeURIComponent(fnTrim(document.getElementById("ddl_Ins_State").value));

    var queryString = "?state=" + state;
    var url = '/Handlers/getCity.ashx';
    var strUrl = url + queryString;


    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");
                var objSelect = document.getElementById("ddl_Ins_City");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}


function fnBindProduct() {

    //alert(1);
    fnClearSelectBox("ddl_ProductType");

    var url = "/Handlers/getProducts.ashx";
    var strUrl = url;

    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");
                var objSelect = document.getElementById("ddl_ProductType");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}

function fnBindModels() {


    fnClearSelectBox("ddl_ModelNo");

    var Product = encodeURIComponent(fnTrim(document.getElementById("ddl_ProductType").value));

    var queryString = "?Product=" + Product;
    var url = '/Handlers/getModels.ashx';
    var strUrl = url + queryString;


    $.ajax({
        dataType: "jsonp",
        url: strUrl,
        async: false,
        type: "POST",
        success: function (result) {
            {
                var arrResult = result.split("*****");
                var objSelect = document.getElementById("ddl_ModelNo");
                for (i = 0; i < arrResult.length; i++) {
                    var option = document.createElement("option");
                    option.text = arrResult[i];
                    option.value = arrResult[i];
                    try {
                        // for IE earlier than version 8
                        objSelect.add(option, objSelect.options[null]);
                    }
                    catch (e) {
                        objSelect.add(option, null);
                    }
                }
            }
        },
        error: function (result) {

        }
    });
}

///////////////////////////Start careers ////////////////////////////

function fnCareersubmit() {

    var strUrl = "/Handlers/careers.ashx";

    var name = document.getElementById("ctxt_name").value;
    //alert(name);
    var email = document.getElementById("ctxt_email").value;
    var mobile = document.getElementById("ctxt_mobile").value;
    var imgToSave = $("#file_upload_button").val();

    if (name != "" && name != "Name") {
        strUrl = strUrl + "?name=" + name;
    }

    if (email != "" && email != "Email") {
        strUrl = strUrl + "&email=" + email;
    }

    if (mobile != "" && mobile != "Mobile No.") {
        strUrl = strUrl + "&mobile=" + mobile;
    }



    $.ajaxFileUpload
           (
                  {
                      url: strUrl,
                      secureuri: false,
                      fileElementId: 'file_upload_button',
                      dataType: 'JSON',
                      data: {},
                      success: function (result) {

                          if (result.replace("<pre>", "").replace("</pre>", "") == "Success") {
                              fnclearCareersform();
                              document.getElementById("frm_Careers").reset();
                              //$("#frm_Careers").hide();
                              // $("#thankyouPage").show();

                              $("#thankyoupage").trigger('click');
                          }
                          else {
                              fnclearCareersform();
                              var data = result.replace("<pre>", "").replace("</pre>", "");
                              var fullResult = data.split("@@");
                              //alert(fullResult);
                              for (i = 0; i < fullResult.length; i++) {

                                  var arrResult = fullResult[i].split("*****");

                                  if (document.getElementById(arrResult[1]) != null) {
                                      $("#span_" + arrResult[1]).css("display", "block");
                                      $("#span_" + arrResult[1]).html(arrResult[0]);
                                  }
                              }
                          }

                      },
                      error: function (data, status, e) {
                          alert(data);
                      }
                  }
           );
}


function fnclearCareersform() {
    $("#span_ctxt_name").css("display", "none");
    $("#span_ctxt_email").css("display", "none");
    $("#span_ctxt_mobile").css("display", "none");
    $("#span_file_upload_button").css("display", "none");
}

//////////////////////////End careers //////////////////////////////////////

/////////////////////////Start Media /////////////////////////////////////////////////////////////////////////////

function fnCheckValidationMedia() {
    var FromDate = $("#txt_FromDate").val();
    var ToDate = $("#txt_ToDate").val();

    if (FromDate == "" || FromDate == "From") {
        alert("Please choose From Date.")
        document.getElementById("txt_FromDate").focus();
        return false;
    }
    else if (ToDate == "" || ToDate == "To") {
        alert("Please choose To Date.")
        document.getElementById("txt_ToDate").focus();
        return false;
    }
    else {
        fnDisplayMedia("")
    }

    return false;
}
function fnCheckSearchMedia() {
    var txtSearch = document.getElementById("txt_Search").value;

    if (txtSearch == "" || txtSearch == "Keywords") {
        alert("Please enter keyword to search.")
        document.getElementById("txt_Search").focus();
        return false;
    }
    else {
        fnDisplayMedia(document.getElementById("txt_Search").value)
    }

    return false;
}

function fnDisplayMedia(searchkeyword) {
    var FromDate = $("#txt_FromDate").val();
    var ToDate = $("#txt_ToDate").val();
    var sDate = new Date(Date.parse(FromDate));
    var tDate = new Date(Date.parse(ToDate));

    var strSql = "";
    if (searchkeyword != "" && searchkeyword != "Search") {
        strSql = "select * from arrMedia where ((media_place.indexOf('" + searchkeyword + "')!=-1)  || (media_heading.indexOf('" + searchkeyword + "')!=-1) || (mediauploadedFile.indexOf('" + searchkeyword + "')!=-1) || (media_date.indexOf('" + searchkeyword + "')!=-1) )";
    }
    else if (FromDate != "" && FromDate != "From" && ToDate != "" && ToDate != "To") {
        strSql = "select * from arrMedia where (media_date>=" + FromDate + " && media_date<" + FromDate + ") ";
    }
    else {
        strSql = "select * from arrMedia";
    }

    var arrMediaFiltered = jsonsql.query(strSql, arrMedia);
    var strData = "";
    if (arrMediaFiltered.length > 0) {
        var totItems = 10;

        if (arrMediaFiltered.length < 10) {
            totItems = arrMediaFiltered.length;
        }
        if (totItems > 0) {

            for (i = 0; i < totItems; i++) {
                strData += "<div class='press' >";
                strData += "<p>";
                if (arrMediaFiltered[i].media_place != "") {
                    strData += arrMediaFiltered[i].media_place;
                }
                strData += "</p>";

                strData += "<h2>";
                if (arrMediaFiltered[i].mediauploadedFile != "") {
                    strData += "<a href='" + arrMediaFiltered[i].mediauploadedFile + "' target='_blank'>" + arrMediaFiltered[i].media_heading + "</a>";
                } else {
                    strData += arrMediaFiltered[i].media_heading;
                }
                strData += "</h2>";

                strData += "<p>";
                strData += arrMediaFiltered[i].month + " " + arrMediaFiltered[i].date + ", " + arrMediaFiltered[i].year;
                strData += "</p>";
            }

        }
    }
    else { strData = "No Data found!"; }
    $(".pressRelease").html(strData);
}


///////////////////////////End  Media //////////////////////////////////////////////////////////////////////////////


function isValidDate1(varFrom, varTo) {
    alert(varFrom);
    var fromdate, todate, dt1, dt2, mon1, mon2, yr1, yr2, date1, date2;
    var chkFrom = document.getElementById(varFrom);
    var chkTo = document.getElementById(varTo);
    alert(document.getElementById(varFrom).value);
    if (trim(document.getElementById(varFrom).value, '') == '') {
        alert('From date should not be empty');
        document.getElementById(varFrom).value = '';
        document.getElementById(varFrom).focus();
        return false;
    }
    else if (trim(document.getElementById(varTo).value, '') == '') {
        alert('To date should not be empty');
        document.getElementById(varTo).value = '';
        document.getElementById(varTo).focus();
        return false;
    }
    if (varFrom != null && trim(document.getElementById(varFrom).value, '') != '' && varTo != null && trim(document.getElementById(varTo).value, '') != '') {
        if (checkdate(chkFrom) != true) {
            document.getElementById(varFrom).value = '';
            document.getElementById(varFrom).focus();
            return false;
        }
        else if (checkdate(chkTo) != true) {
            document.getElementById(varTo).value = '';
            document.getElementById(varTo).focus();
            return false;
        }
        else {
            fromdate = trim(document.getElementById(varFrom).value, '');
            todate = trim(document.getElementById(varTo).value, '');
            dt1 = parseInt(fromdate.substring(0, 2), 10);
            mon1 = parseInt(fromdate.substring(3, 5), 10);
            yr1 = parseInt(fromdate.substring(6, 10), 10);
            dt2 = parseInt(todate.substring(0, 2), 10);
            mon2 = parseInt(todate.substring(3, 5), 10);
            yr2 = parseInt(todate.substring(6, 10), 10);
            date1 = new Date(yr1, mon1, dt1);
            date2 = new Date(yr2, mon2, dt2);

            if (date2 <= date1) {
                alert("To date Should be greater than From date");
                document.getElementById(varTo).value = '';
                document.getElementById(varTo).focus();
                return false;
            }
        }
    }
    return true;
}

function checkdate1(input) {
    var validformat = /^\d{2}\/\d{2}\/\d{4}$/  //Basic check for format validity
    var returnval = false
    if (!validformat.test(input.value))
        alert("Invalid Date Format. Please correct and submit again.")
    else { //Detailed check for valid date ranges
        var monthfield = input.value.split("/")[1]
        var dayfield = input.value.split("/")[0]
        var yearfield = input.value.split("/")[2]
        var dayobj = new Date(yearfield, monthfield - 1, dayfield)
        if ((dayobj.getMonth() + 1 != monthfield) || (dayobj.getDate() != dayfield) || (dayobj.getFullYear() != yearfield))
            alert("Invalid Day, Month, or Year range detected. Please correct and submit again.")
        else
            returnval = true
    }
    return returnval
}

function isValidDate(varFrom, varTo) {

    var fromdate, todate, dt1, dt2, mon1, mon2, yr1, yr2, date1, date2;
    var chkFrom = document.getElementById(varFrom);
    var chkTo = document.getElementById(varTo);

    if (varFrom != null && varTo != null) {

        if (checkdate(chkFrom) != true) {
            chkFrom.value = '';
            chkFrom.focus();
            return false;
        }
        else if (checkdate(chkTo) != true) {
            chkTo.value = '';
            chkTo.focus();
            return false;
        }
        else {
            fromdate = chkFrom.value;
            todate = chkTo.value;
            date1 = new Date(fromdate);
            date2 = new Date(todate);

            if (date2 <= date1) {
                alert("To date Should be greater than From date");
                chkFrom.value = '';
                chkFrom.focus();
                return false;
            }
        }
    }
    return true;
}

function checkdate(input) {
    var validformat = /^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{4}$/ //Basic check for format validity
    var returnval = true;
    if (input.value == '' || !validformat.test(input.value)) {
        alert("Invalid Date Format. Please correct and submit again.")
        var returnval = false;
    }
    return returnval
}


function isValidDateLeapAll(date) {
    var valid = true;

    date = date.replace('/-/g', '');

    var month = parseInt(date.substring(0, 2), 10);
    var day = parseInt(date.substring(2, 4), 10);
    var year = parseInt(date.substring(4, 8), 10);

    if ((month < 1) || (month > 12)) valid = false;
    else if ((day < 1) || (day > 31)) valid = false;
    else if (((month == 4) || (month == 6) || (month == 9) || (month == 11)) && (day > 30)) valid = false;
    else if ((month == 2) && (((year % 400) == 0) || ((year % 4) == 0)) && ((year % 100) != 0) && (day > 29)) valid = false;
    else if ((month == 2) && ((year % 100) == 0) && (day > 29)) valid = false;
    else if ((month == 2) && (day > 28)) valid = false;

    return valid;
}


function bindBrands() {

    var arrFilterDealerInfo = arrDealerInfo1;
    var sqlDealerInfo = "select * from arrDealerInfo1 ";


    if ($("#ddl_Category").val() != "" && $("#ddl_state").val() != "" && $("#ddl_city").val() != "") {
        sqlDealerInfo = "select * from arrDealerInfo1 where (Category=='" + $("#ddl_Category").val() + "' && State=='" + $("#ddl_state").val() + "' && City=='" + $("#ddl_city").val() + "')";

    }
    else if ($("#ddl_Category").val() != "" && $("#ddl_state").val() != "" && $("#ddl_city").val() == "") {
        sqlDealerInfo = "select * from arrDealerInfo1 where (Category=='" + $("#ddl_Category").val() + "' && State=='" + $("#ddl_state").val() + "' )";

    }
    else if ($("#ddl_Category").val() != "" && $("#ddl_state").val() == "" && $("#ddl_city").val() == "") {
        sqlDealerInfo = "select * from arrDealerInfo1 where (Category=='" + $("#ddl_Category").val() + "' )";

    }

    arrFilterDealerInfo = jsonsql.query(sqlDealerInfo, arrDealerInfo1);
    var markers = arrFilterDealerInfo;
    var strData = "";
    if (arrFilterDealerInfo.length > 0) {

        for (var index = 0; index < arrFilterDealerInfo.length; index++) {
            strData += "<li>";
            strData += "<p><strong>" + arrFilterDealerInfo[index].DealerName + "</strong></p>";
            strData += "<p>" + arrFilterDealerInfo[index].Name + "</p>";
            strData += "<p>" + arrFilterDealerInfo[index].Address + "</p>";
            if (arrFilterDealerInfo[index].Phone != "" && arrFilterDealerInfo[index].Phone != null) {
                strData += "<p>Phone: " + arrFilterDealerInfo[index].Phone + "</p>";
            }
            if (arrFilterDealerInfo[index].Fax != "" && arrFilterDealerInfo[index].Fax != null) {
                strData += "<p>Fax: " + arrFilterDealerInfo[index].Fax + "</p>";
            }
            if (arrFilterDealerInfo[index].Mobile != "" && arrFilterDealerInfo[index].Mobile != null) {
                strData += "<p>Mobile: " + arrFilterDealerInfo[index].Mobile + "</p>";
            }
            if (arrFilterDealerInfo[index].Email != "" && arrFilterDealerInfo[index].Email != null) {
                strData += "<p>Email: " + arrFilterDealerInfo[index].Email + "</p>";
            }
            strData += "</li>";
            document.getElementById("brand").innerHTML = "Showroom";

        }

    }
    else {
        //strData = "No data found!";
        //$("brand").html("");
        document.getElementById("brand").innerHTML = "";
    }
    $("#displayDealerData1").html(strData);
}

function showroom() {

    var arrFilterDealerInfo = arrDealerInfo2;
    var sqlDealerInfo = "select * from arrDealerInfo2";


    if ($("#ddl_Category").val() != "" && $("#ddl_state").val() != "" && $("#ddl_city").val() != "") {
        sqlDealerInfo = "select * from arrDealerInfo2 where (Category=='" + $("#ddl_Category").val() + "' && State=='" + $("#ddl_state").val() + "' && City=='" + $("#ddl_city").val() + "')";

    }
    else if ($("#ddl_Category").val() != "" && $("#ddl_state").val() != "" && $("#ddl_city").val() == "") {
        sqlDealerInfo = "select * from arrDealerInfo2 where (Category=='" + $("#ddl_Category").val() + "' && State=='" + $("#ddl_state").val() + "' )";

    }
    else if ($("#ddl_Category").val() != "" && $("#ddl_state").val() == "" && $("#ddl_city").val() == "") {
        sqlDealerInfo = "select * from arrDealerInfo2 where (Category=='" + $("#ddl_Category").val() + "' )";

    }

    arrFilterDealerInfo = jsonsql.query(sqlDealerInfo, arrDealerInfo2);
    var markers = arrFilterDealerInfo;
    var strData = "";
    if (arrFilterDealerInfo.length > 0) {

        for (var index = 0; index < arrFilterDealerInfo.length; index++) {
            strData += "<li>";
            strData += "<p><strong>" + arrFilterDealerInfo[index].DealerName + "</strong></p>";
            strData += "<p>" + arrFilterDealerInfo[index].Name + "</p>";
            strData += "<p>" + arrFilterDealerInfo[index].Address + "</p>";
            if (arrFilterDealerInfo[index].Phone != "" && arrFilterDealerInfo[index].Phone != null) {
                strData += "<p>Phone: " + arrFilterDealerInfo[index].Phone + "</p>";
            }
            if (arrFilterDealerInfo[index].Fax != "" && arrFilterDealerInfo[index].Fax != null) {
                strData += "<p>Fax: " + arrFilterDealerInfo[index].Fax + "</p>";
            }
            if (arrFilterDealerInfo[index].Mobile != "" && arrFilterDealerInfo[index].Mobile != null) {
                strData += "<p>Mobile: " + arrFilterDealerInfo[index].Mobile + "</p>";
            }
            if (arrFilterDealerInfo[index].Email != "" && arrFilterDealerInfo[index].Email != null) {
                strData += "<p>Email: " + arrFilterDealerInfo[index].Email + "</p>";
            }
            strData += "</li>";
            document.getElementById("showroom").innerHTML = "Brand Stores";

        }

    }
    else {
        //strData = "No data found!";
        //$("brand").html("");
        document.getElementById("showroom").innerHTML = "";
    }
    $("#displayDealer2").html(strData);
}
function starLeague() {

    var arrFilterDealerInfo = arrDealerInfo3;
    var sqlDealerInfo = "select * from arrDealerInfo3";


    if ($("#ddl_Category").val() != "" && $("#ddl_state").val() != "" && $("#ddl_city").val() != "") {
        sqlDealerInfo = "select * from arrDealerInfo3 where (Category=='" + $("#ddl_Category").val() + "' && State=='" + $("#ddl_state").val() + "' && City=='" + $("#ddl_city").val() + "')";

    }
    else if ($("#ddl_Category").val() != "" && $("#ddl_state").val() != "" && $("#ddl_city").val() == "") {
        sqlDealerInfo = "select * from arrDealerInfo3 where (Category=='" + $("#ddl_Category").val() + "' && State=='" + $("#ddl_state").val() + "' )";

    }
    else if ($("#ddl_Category").val() != "" && $("#ddl_state").val() == "" && $("#ddl_city").val() == "") {
        sqlDealerInfo = "select * from arrDealerInfo3 where (Category=='" + $("#ddl_Category").val() + "' )";

    }

    arrFilterDealerInfo = jsonsql.query(sqlDealerInfo, arrDealerInfo3);
    var markers = arrFilterDealerInfo;
    var strData = "";
    if (arrFilterDealerInfo.length > 0) {

        for (var index = 0; index < arrFilterDealerInfo.length; index++) {
            strData += "<li>";
            strData += "<p><strong>" + arrFilterDealerInfo[index].DealerName + "</strong></p>";
            strData += "<p>" + arrFilterDealerInfo[index].Name + "</p>";
            strData += "<p>" + arrFilterDealerInfo[index].Address + "</p>";
            if (arrFilterDealerInfo[index].Phone != "" && arrFilterDealerInfo[index].Phone != null) {
                strData += "<p>Phone: " + arrFilterDealerInfo[index].Phone + "</p>";
            }
            if (arrFilterDealerInfo[index].Fax != "" && arrFilterDealerInfo[index].Fax != null) {
                strData += "<p>Fax: " + arrFilterDealerInfo[index].Fax + "</p>";
            }
            if (arrFilterDealerInfo[index].Mobile != "" && arrFilterDealerInfo[index].Mobile != null) {
                strData += "<p>Mobile: " + arrFilterDealerInfo[index].Mobile + "</p>";
            }
            if (arrFilterDealerInfo[index].Email != "" && arrFilterDealerInfo[index].Email != null) {
                strData += "<p>Email: " + arrFilterDealerInfo[index].Email + "</p>";
            }
            strData += "</li>";
            document.getElementById("starleague").innerHTML = "Star League Club Dealers";

        }

    }
    else {
        //strData = "No data found!";
        //$("brand").html("");
        document.getElementById("starleague").innerHTML = "";
    }
    $("#displayDealerData2").html(strData);
}

//Get Intouch form positioning
$(".getinTouch").css("top", "570px");

function debounce(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
};

var myFuncCalls = 0;

var myEfficientFn = debounce(function() {
    myFuncCalls++;
     console.log(myFuncCalls);
	$(document).scroll(function() {
        //var y = $(this).scrollTop();
        //if (y > 100) {
         //$(".getinTouch").css("top", "480px")
        //} else {
            //$(".getinTouch").css("top", "570px");
        //}
      });
}, 250);
window.addEventListener('scroll', myEfficientFn);

//getintouchInt form
var products = document.getElementById("intproducts");
var enquiry = document.querySelector("#ddl_Enquiry_main");
var country = document.getElementsByClassName("country");
var country2 = document.getElementsByClassName("country2");
var country3 = document.getElementsByClassName("country3");

products.style.display = "none";

function enquirytype(){

     if (enquiry.value == "Products" || enquiry.value == "Service & Maintenance") {

           products.style.display = "block";

           for(var i = 0, l = country.length; i < l; i++) {
            country[i].style.display = "block";
            }
           for(var i = 0, l = country2.length; i < l; i++) {
            country2[i].style.display = "block";
           }
           for(var i = 0, l = country3.length; i < l; i++) {
            country3[i].style.display = "none";
            }

      }

      else  if (enquiry.value == "Projects") {

           products.style.display = "none";

            for(var i = 0, l = country.length; i < l; i++) {
                 country[i].style.display = "none";
            }
           for(var i = 0, l = country2.length; i < l; i++) {
                country2[i].style.display = "block";
           }
           for(var i = 0, l = country3.length; i < l; i++) {
                country3[i].style.display = "block";
            }

         } else {

          products.style.display = "none";

           for(var i = 0, l = country.length; i < l; i++) {
                country[i].style.display = "block";
           }
          for(var i = 0, l = country2.length; i < l; i++) {
               country2[i].style.display = "block";
          }
          for(var i = 0, l = country3.length; i < l; i++) {
               country3[i].style.display = "none";
           }

        }
     }
